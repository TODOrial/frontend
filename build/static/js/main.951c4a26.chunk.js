(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{32:function(e,t,a){e.exports=a(61)},37:function(e,t,a){},39:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),s=a.n(c),l=(a(37),a(38),a(7)),o=a(1),i=a(2),u=(a(39),a(3)),m=a(28),p=a(10),b=a.n(p),f=a(29),d=a.n(f),v=a(30),E=a.n(v),O=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_ENV||"production",N=E.a.create({baseURL:{development:"http://localhost:5000",production:"https://todorial.herokuapp.com"}[O]}),h=a(13);var k=function(e){var t=e.taskData,a=t._id,n=t.title,c=t.description,s=t.createdAt;h.DateTime.local().setLocale("pt-br");var o=h.DateTime.fromISO(s);return r.a.createElement(l.b,{className:"task-card",to:"/".concat(a,"/edit")},r.a.createElement("h4",{className:"task-title"},n),r.a.createElement("div",{className:"row space-between word-break-all"},r.a.createElement("p",{className:"task-description"},c),r.a.createElement("p",{className:"task-updated-at-date"},o.toFormat("ff"))))};var C=function(){var e=Object(m.useUrlSearchParams)({offset:0,limit:10},{offset:Number,limit:Number}),t=Object(u.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!0),l=Object(u.a)(s,2),o=l[0],i=l[1],p=Object(n.useState)(),f=Object(u.a)(p,2),v=f[0],E=f[1],O=Object(n.useState)({offset:a.offset,limit:a.limit,last:0}),h=Object(u.a)(O,2),C=h[0],j=h[1];return r.a.createElement("div",{className:"screen-route home-screen"},!o&&v&&r.a.createElement("ul",{className:"todo-list"},v.map((function(e,t){return r.a.createElement(k,{taskData:e,key:t})}))),o&&r.a.createElement("div",{className:"flex-center"},r.a.createElement(b.a,{type:"bars",color:"#bbb"})),r.a.createElement(d.a,{disableInitialCallback:!1,initialPage:C.offset/C.limit,pageCount:Math.max(1,Math.ceil(C.last/C.limit)),pageRangeDisplayed:4,marginPagesDisplayed:1,onPageChange:function(e){var t=e.selected;!function(e,t){i(!0),N.get("/tasks?offset=".concat(e,"&limit=").concat(t)).then((function(e){var t=e.data,a=t.offset,n=t.limit,r=t.last,s=t.results;i(!1),E(s),j({offset:a,limit:n,last:r}),c({offset:a,limit:C.limit})}))}(Math.ceil(t*C.limit),C.limit)},breakLabel:"...",nextLabel:"Pr\xf3ximo",previousLabel:"Voltar",containerClassName:"pagination",breakClassName:"break-me",activeClassName:"active",nextClassName:"button-link",pageLinkClassName:"button-link",previousClassName:"button-link"}))};var j=function(){var e=Object(o.g)().id,t=Object(o.f)(),a=Object(n.useState)(!0),c=Object(u.a)(a,2),s=c[0],l=c[1],m=Object(n.useState)(),p=Object(u.a)(m,2),f=p[0],d=p[1],v=Object(n.useState)(""),E=Object(u.a)(v,2),O=E[0],h=E[1],C=Object(n.useState)(""),j=Object(u.a)(C,2),S=j[0],g=j[1];return Object(n.useEffect)((function(){N.get("/tasks/".concat(e)).then((function(e){var t=e.data;d(t),h(t.title),g((null===t||void 0===t?void 0:t.description)||""),l(!1)})).catch((function(e){if(t.push("/"),e.response){var a=e.response.status,n=e.response.data;i.b.error("".concat(a," - ").concat(n.error))}else i.b.error("Houve um problema ao tentar acessar a tarefa... Por favor, verifique as informa\xe7\xf5es.")}))}),[e,t]),Object(n.useEffect)((function(){d((function(e){return{_id:null===e||void 0===e?void 0:e._id,title:O,description:S,createdAt:null===e||void 0===e?void 0:e.createdAt,updatedAt:null===e||void 0===e?void 0:e.updatedAt}}))}),[O,S]),r.a.createElement("div",{className:"screen-route edit-screen"},s&&r.a.createElement("div",{className:"flex-center"},r.a.createElement(b.a,{type:"bars",color:"#bbb"})),!s&&!f&&r.a.createElement("div",{className:"flex-center"},r.a.createElement(b.a,{type:"bars",color:"#bbb"})),!s&&f&&r.a.createElement(k,{taskData:f}),!s&&f&&r.a.createElement("form",{className:"col"},r.a.createElement("label",{className:"col"},"T\xedtulo",r.a.createElement("input",{className:"input-text",type:"text",value:O,onChange:function(e){return h(e.target.value)}})),r.a.createElement("label",{className:"col"},"Descri\xe7\xe3o",r.a.createElement("input",{className:"input-text",type:"text",value:S,onChange:function(e){return g(e.target.value)}})),r.a.createElement("input",{className:"create-task-button",type:"submit",value:"Salvar",onClick:function(e){e.preventDefault(),l(!0);var t={title:O,description:S};N.patch("/tasks/".concat(null===f||void 0===f?void 0:f._id,"/edit"),t).then((function(){i.b.success("As altera\xe7\xf5es foram salvas com sucesso!")})).catch((function(e){if(e.response){var t=e.response.status,a=e.response.data;i.b.error("".concat(t," - ").concat(a.error))}else i.b.error("Houve um problema ao tentar salvar as atera\xe7\xf5es... Por favor, tente novamente.")})).then((function(){l(!1)}))}}),r.a.createElement("input",{className:"create-task-button",type:"submit",value:"Cancelar",onClick:function(e){e.preventDefault(),i.b.info("Nenhuma das altera\xe7\xf5es realizadas foram salvas!"),t.push("/")}}),r.a.createElement("input",{className:"delete-task-button",type:"submit",value:"Excluir",onClick:function(e){e.preventDefault(),l(!0),N.delete("/tasks/".concat(null===f||void 0===f?void 0:f._id,"/delete")).then((function(){i.b.success("Uma tarefa foi removida com sucesso!"),t.push("/")})).catch((function(e){if(l(!1),e.response){var t=e.response.status,a=e.response.data;i.b.error("".concat(t," - ").concat(a.error))}else i.b.error("Houve um problema ao tentar remover a tarefa... Por favor, tente novamente.")}))}})))};var S=function(){var e=Object(n.useState)(),t=Object(u.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),l=Object(u.a)(s,2),m=l[0],p=l[1],f=Object(n.useState)(""),d=Object(u.a)(f,2),v=d[0],E=d[1],O=Object(o.f)();return r.a.createElement("div",{className:"screen-route create-screen"},a&&r.a.createElement("div",{className:"flex-center"},r.a.createElement(b.a,{type:"bars",color:"#bbb"})),!a&&r.a.createElement("form",{className:"col"},r.a.createElement("label",{className:"col"},"T\xedtulo",r.a.createElement("input",{className:"input-text",type:"text",value:m,onChange:function(e){return p(e.target.value)}})),r.a.createElement("label",{className:"col"},"Descri\xe7\xe3o",r.a.createElement("input",{className:"input-text",type:"text",value:v,onChange:function(e){return E(e.target.value)}})),r.a.createElement("input",{className:"create-task-button",type:"submit",value:"Criar",onClick:function(e){e.preventDefault(),c(!0),N.post("/tasks/create",{title:m,description:v}).then((function(){i.b.success("Tarefa criada com sucesso!"),O.push("/")})).catch((function(e){if(c(!1),e.response){var t=e.response.status,a=e.response.data;i.b.error("".concat(t," - ").concat(a.error))}else i.b.error("Houve um problema ao tentar criar a tarefa... Por favor, tente novamente.")}))}}),r.a.createElement("input",{className:"create-task-button",type:"submit",value:"Cancelar",onClick:function(e){e.preventDefault(),i.b.info("Nenhuma das altera\xe7\xf5es realizadas foram salvas!"),O.push("/")}})))},g=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_ENV||"production";var D=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(l.a,null,"production"!==g&&r.a.createElement("span",null,"dev-mode"),r.a.createElement("h1",{className:"app-title"},"TODOrial"),r.a.createElement("div",{className:"navbar"},r.a.createElement(l.b,{to:"/"},"Tarefas"),r.a.createElement(l.b,{to:"/create"},"Adicionar Tarefa")),r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/create"},r.a.createElement(S,null)),r.a.createElement(o.a,{path:"/:id/edit"},r.a.createElement(j,null)),r.a.createElement(o.a,{path:"/"},r.a.createElement(C,null))),r.a.createElement(i.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})))};s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.951c4a26.chunk.js.map