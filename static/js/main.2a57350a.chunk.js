(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{29:function(e,t,a){e.exports=a(57)},34:function(e,t,a){},35:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(24),r=a.n(l),i=(a(34),a(6)),s=a(1),o=(a(35),a(5)),u=a(25),m=a.n(u),d=a(26),p=a.n(d),v=a(27),E=a.n(v),f=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_ENV||"production",b=E.a.create({baseURL:{development:"http://localhost:5000",production:"https://todorial.herokuapp.com"}[f]}),O=a(9);var N=function(e){var t=e.taskData,a=t._id,n=t.title,l=t.description,r=t.createdAt;O.DateTime.local().setLocale("pt-br");var s=O.DateTime.fromISO(r);return c.a.createElement(i.b,{className:"task-card",to:"/".concat(a,"/edit")},c.a.createElement("h4",{className:"task-title"},n),c.a.createElement("div",{className:"row space-between word-break-all"},c.a.createElement("p",{className:"task-description"},l),c.a.createElement("p",{className:"task-updated-at-date"},s.toFormat("ff"))))};var h=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)(),i=Object(o.a)(r,2),s=i[0],u=i[1],d=Object(n.useState)({offset:0,limit:10,last:0}),v=Object(o.a)(d,2),E=v[0],f=v[1];function O(e,t){return l(!0),b.get("/tasks?offset=".concat(e,"&limit=").concat(t)).then((function(e){var t=e.data,a=t.offset,n=t.limit,c=t.last,r=t.results;console.log(e.data),l(!1),u(r),f({offset:a,limit:n,last:c})}))}return Object(n.useEffect)((function(){O(E.offset,E.limit)}),[E.offset,E.limit]),c.a.createElement("div",{className:"screen-route home-screen"},!a&&s&&c.a.createElement("ul",{className:"todo-list"},s.map((function(e,t){return c.a.createElement(N,{taskData:e,key:t})}))),a&&c.a.createElement("div",{className:"flex-center"},c.a.createElement(m.a,{type:"bars",color:"#bbb"})),c.a.createElement(p.a,{pageCount:Math.max(1,Math.ceil(E.last/E.limit)),pageRangeDisplayed:4,marginPagesDisplayed:1,onPageChange:function(e){var t=e.selected;O(Math.ceil(t*E.limit),E.limit)},breakLabel:"...",nextLabel:"Pr\xf3ximo",previousLabel:"Voltar",containerClassName:"pagination",breakClassName:"break-me",activeClassName:"active",nextClassName:"button-link",pageLinkClassName:"button-link",previousClassName:"button-link"}))};var k=function(){var e=Object(s.g)().id,t=Object(s.f)(),a=Object(n.useState)(),l=Object(o.a)(a,2),r=l[0],i=l[1],u=Object(n.useState)(""),m=Object(o.a)(u,2),d=m[0],p=m[1],v=Object(n.useState)(""),E=Object(o.a)(v,2),f=E[0],O=E[1];return Object(n.useEffect)((function(){b.get("/tasks/".concat(e)).then((function(e){var t=e.data;i(t),p(t.title),O((null===t||void 0===t?void 0:t.description)||"")})).catch((function(e){t.push("/")}))}),[e,t]),Object(n.useEffect)((function(){i((function(e){return{_id:null===e||void 0===e?void 0:e._id,title:d,description:f,createdAt:null===e||void 0===e?void 0:e.createdAt,updatedAt:null===e||void 0===e?void 0:e.updatedAt}}))}),[d,f]),c.a.createElement("div",{className:"screen-route edit-screen"},r&&c.a.createElement(N,{taskData:r}),c.a.createElement("form",{className:"col"},c.a.createElement("label",{className:"col"},"T\xedtulo",c.a.createElement("input",{className:"input-text",type:"text",value:d,onChange:function(e){return p(e.target.value)}})),c.a.createElement("label",{className:"col"},"Descri\xe7\xe3o",c.a.createElement("input",{className:"input-text",type:"text",value:f,onChange:function(e){return O(e.target.value)}})),c.a.createElement("input",{className:"create-task-button",type:"submit",value:"Salvar",onClick:function(e){e.preventDefault();var a={title:d,description:f};b.patch("/tasks/".concat(null===r||void 0===r?void 0:r._id,"/edit"),a).then((function(){t.push("/")}))}}),c.a.createElement("input",{className:"delete-task-button",type:"submit",value:"Excluir",onClick:function(e){e.preventDefault(),b.delete("/tasks/".concat(null===r||void 0===r?void 0:r._id,"/delete")).then((function(){t.push("/")}))}})))};var C=function(){var e=Object(n.useState)(),t=Object(o.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)(),i=Object(o.a)(r,2),u=i[0],m=i[1],d=Object(s.f)();return c.a.createElement("div",{className:"screen-route create-screen"},c.a.createElement("form",{className:"col"},c.a.createElement("label",{className:"col"},"T\xedtulo",c.a.createElement("input",{className:"input-text",type:"text",value:a,onChange:function(e){return l(e.target.value)}})),c.a.createElement("label",{className:"col"},"Descri\xe7\xe3o",c.a.createElement("input",{className:"input-text",type:"text",value:u,onChange:function(e){return m(e.target.value)}})),c.a.createElement("input",{className:"create-task-button",type:"submit",value:"Criar",onClick:function(e){e.preventDefault(),b.post("/tasks/create",{title:a,description:u}).then((function(){d.push("/")}))}})))},S=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_ENV||"production";var j=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(i.a,null,"production"!==S&&c.a.createElement("span",null,"dev-mode"),c.a.createElement("h1",{className:"app-title"},"TODOrial"),c.a.createElement("div",{className:"navbar"},c.a.createElement(i.b,{to:"/"},"Tarefas"),c.a.createElement(i.b,{to:"/create"},"Adicionar Tarefa")),c.a.createElement(s.c,null,c.a.createElement(s.a,{path:"/create"},c.a.createElement(C,null)),c.a.createElement(s.a,{path:"/:id/edit"},c.a.createElement(k,null)),c.a.createElement(s.a,{path:"/"},c.a.createElement(h,null)))))};r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(j,null)),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.2a57350a.chunk.js.map