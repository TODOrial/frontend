(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{31:function(e,t,a){e.exports=a(60)},36:function(e,t,a){},38:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(8),r=a.n(s),l=(a(36),a(37),a(7)),o=a(1),i=a(4),u=(a(38),a(5)),m=a(10),p=a.n(m),d=a(28),b=a.n(d),f=a(29),v=a.n(f),E=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_ENV||"production",O=v.a.create({baseURL:{development:"http://localhost:5000",production:"https://todorial.herokuapp.com"}[E]}),N=a(13);var h=function(e){var t=e.taskData,a=t._id,n=t.title,s=t.description,r=t.createdAt;N.DateTime.local().setLocale("pt-br");var o=N.DateTime.fromISO(r);return c.a.createElement(l.b,{className:"task-card",to:"/".concat(a,"/edit")},c.a.createElement("h4",{className:"task-title"},n),c.a.createElement("div",{className:"row space-between word-break-all"},c.a.createElement("p",{className:"task-description"},s),c.a.createElement("p",{className:"task-updated-at-date"},o.toFormat("ff"))))};var k=function(){var e=Object(n.useState)(!0),t=Object(u.a)(e,2),a=t[0],s=t[1],r=Object(n.useState)(),l=Object(u.a)(r,2),o=l[0],i=l[1],m=Object(n.useState)({offset:0,limit:10,last:0}),d=Object(u.a)(m,2),f=d[0],v=d[1];function E(e,t){return s(!0),O.get("/tasks?offset=".concat(e,"&limit=").concat(t)).then((function(e){var t=e.data,a=t.offset,n=t.limit,c=t.last,r=t.results;s(!1),i(r),v({offset:a,limit:n,last:c})}))}return Object(n.useEffect)((function(){E(f.offset,f.limit)}),[f.offset,f.limit]),c.a.createElement("div",{className:"screen-route home-screen"},!a&&o&&c.a.createElement("ul",{className:"todo-list"},o.map((function(e,t){return c.a.createElement(h,{taskData:e,key:t})}))),a&&c.a.createElement("div",{className:"flex-center"},c.a.createElement(p.a,{type:"bars",color:"#bbb"})),c.a.createElement(b.a,{pageCount:Math.max(1,Math.ceil(f.last/f.limit)),pageRangeDisplayed:4,marginPagesDisplayed:1,onPageChange:function(e){var t=e.selected;E(Math.ceil(t*f.limit),f.limit)},breakLabel:"...",nextLabel:"Pr\xf3ximo",previousLabel:"Voltar",containerClassName:"pagination",breakClassName:"break-me",activeClassName:"active",nextClassName:"button-link",pageLinkClassName:"button-link",previousClassName:"button-link"}))};var C=function(){var e=Object(o.g)().id,t=Object(o.f)(),a=Object(n.useState)(!0),s=Object(u.a)(a,2),r=s[0],l=s[1],m=Object(n.useState)(),d=Object(u.a)(m,2),b=d[0],f=d[1],v=Object(n.useState)(""),E=Object(u.a)(v,2),N=E[0],k=E[1],C=Object(n.useState)(""),j=Object(u.a)(C,2),S=j[0],g=j[1];return Object(n.useEffect)((function(){O.get("/tasks/".concat(e)).then((function(e){var t=e.data;f(t),k(t.title),g((null===t||void 0===t?void 0:t.description)||""),l(!1)})).catch((function(e){if(t.push("/"),e.response){var a=e.response.status,n=e.response.data;i.b.error("".concat(a," - ").concat(n.error))}}))}),[e,t]),Object(n.useEffect)((function(){f((function(e){return{_id:null===e||void 0===e?void 0:e._id,title:N,description:S,createdAt:null===e||void 0===e?void 0:e.createdAt,updatedAt:null===e||void 0===e?void 0:e.updatedAt}}))}),[N,S]),c.a.createElement("div",{className:"screen-route edit-screen"},r&&c.a.createElement("div",{className:"flex-center"},c.a.createElement(p.a,{type:"bars",color:"#bbb"})),!r&&!b&&c.a.createElement("div",{className:"flex-center"},c.a.createElement(p.a,{type:"bars",color:"#bbb"})),!r&&b&&c.a.createElement(h,{taskData:b}),!r&&b&&c.a.createElement("form",{className:"col"},c.a.createElement("label",{className:"col"},"T\xedtulo",c.a.createElement("input",{className:"input-text",type:"text",value:N,onChange:function(e){return k(e.target.value)}})),c.a.createElement("label",{className:"col"},"Descri\xe7\xe3o",c.a.createElement("input",{className:"input-text",type:"text",value:S,onChange:function(e){return g(e.target.value)}})),c.a.createElement("input",{className:"create-task-button",type:"submit",value:"Salvar",onClick:function(e){e.preventDefault(),l(!0);var t={title:N,description:S};O.patch("/tasks/".concat(null===b||void 0===b?void 0:b._id,"/edit"),t).then((function(){i.b.success("As altera\xe7\xf5es foram salvas com sucesso!")})).catch((function(e){if(e.response){var t=e.response.status,a=e.response.data;i.b.error("".concat(t," - ").concat(a.error))}})).then((function(){l(!1)}))}}),c.a.createElement("input",{className:"create-task-button",type:"submit",value:"Cancelar",onClick:function(e){e.preventDefault(),i.b.info("Nenhuma das altera\xe7\xf5es realizadas foram salvas!"),t.push("/")}}),c.a.createElement("input",{className:"delete-task-button",type:"submit",value:"Excluir",onClick:function(e){e.preventDefault(),l(!0),O.delete("/tasks/".concat(null===b||void 0===b?void 0:b._id,"/delete")).then((function(){i.b.success("Uma tarefa foi removida com sucesso!"),t.push("/")})).catch((function(e){if(l(!1),e.response){var t=e.response.status,a=e.response.data;i.b.error("".concat(t," - ").concat(a.error))}}))}})))};var j=function(){var e=Object(n.useState)(),t=Object(u.a)(e,2),a=t[0],s=t[1],r=Object(n.useState)(""),l=Object(u.a)(r,2),m=l[0],d=l[1],b=Object(n.useState)(""),f=Object(u.a)(b,2),v=f[0],E=f[1],N=Object(o.f)();return c.a.createElement("div",{className:"screen-route create-screen"},a&&c.a.createElement("div",{className:"flex-center"},c.a.createElement(p.a,{type:"bars",color:"#bbb"})),!a&&c.a.createElement("form",{className:"col"},c.a.createElement("label",{className:"col"},"T\xedtulo",c.a.createElement("input",{className:"input-text",type:"text",value:m,onChange:function(e){return d(e.target.value)}})),c.a.createElement("label",{className:"col"},"Descri\xe7\xe3o",c.a.createElement("input",{className:"input-text",type:"text",value:v,onChange:function(e){return E(e.target.value)}})),c.a.createElement("input",{className:"create-task-button",type:"submit",value:"Criar",onClick:function(e){e.preventDefault(),s(!0),O.post("/tasks/create",{title:m,description:v}).then((function(){i.b.success("Tarefa criada com sucesso!"),N.push("/")})).catch((function(e){if(s(!1),e.response){var t=e.response.status,a=e.response.data;i.b.error("".concat(t," - ").concat(a.error))}}))}}),c.a.createElement("input",{className:"create-task-button",type:"submit",value:"Cancelar",onClick:function(e){e.preventDefault(),i.b.info("Nenhuma das altera\xe7\xf5es realizadas foram salvas!"),N.push("/")}})))},S=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_ENV||"production";var g=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(l.a,null,"production"!==S&&c.a.createElement("span",null,"dev-mode"),c.a.createElement("h1",{className:"app-title"},"TODOrial"),c.a.createElement("div",{className:"navbar"},c.a.createElement(l.b,{to:"/"},"Tarefas"),c.a.createElement(l.b,{to:"/create"},"Adicionar Tarefa")),c.a.createElement(o.c,null,c.a.createElement(o.a,{path:"/create"},c.a.createElement(j,null)),c.a.createElement(o.a,{path:"/:id/edit"},c.a.createElement(C,null)),c.a.createElement(o.a,{path:"/"},c.a.createElement(k,null))),c.a.createElement(i.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})))};r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(g,null)),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.87c4c9d0.chunk.js.map