(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{31:function(e,t,a){e.exports=a(60)},36:function(e,t,a){},38:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),s=a.n(c),o=(a(36),a(37),a(7)),l=a(1),i=a(2),u=(a(38),a(5)),m=a(10),p=a.n(m),b=a(28),d=a.n(b),f=a(29),v=a.n(f),E=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_ENV||"production",O=v.a.create({baseURL:{development:"http://localhost:5000",production:"https://todorial.herokuapp.com"}[E]}),N=a(13);var h=function(e){var t=e.taskData,a=t._id,n=t.title,c=t.description,s=t.createdAt;N.DateTime.local().setLocale("pt-br");var l=N.DateTime.fromISO(s);return r.a.createElement(o.b,{className:"task-card",to:"/".concat(a,"/edit")},r.a.createElement("h4",{className:"task-title"},n),r.a.createElement("div",{className:"row space-between word-break-all"},r.a.createElement("p",{className:"task-description"},c),r.a.createElement("p",{className:"task-updated-at-date"},l.toFormat("ff"))))};var k=function(){var e=Object(n.useState)(!0),t=Object(u.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(),o=Object(u.a)(s,2),l=o[0],i=o[1],m=Object(n.useState)({offset:0,limit:10,last:0}),b=Object(u.a)(m,2),f=b[0],v=b[1];function E(e,t){return c(!0),O.get("/tasks?offset=".concat(e,"&limit=").concat(t)).then((function(e){var t=e.data,a=t.offset,n=t.limit,r=t.last,s=t.results;c(!1),i(s),v({offset:a,limit:n,last:r})}))}return Object(n.useEffect)((function(){E(f.offset,f.limit)}),[f.offset,f.limit]),r.a.createElement("div",{className:"screen-route home-screen"},!a&&l&&r.a.createElement("ul",{className:"todo-list"},l.map((function(e,t){return r.a.createElement(h,{taskData:e,key:t})}))),a&&r.a.createElement("div",{className:"flex-center"},r.a.createElement(p.a,{type:"bars",color:"#bbb"})),r.a.createElement(d.a,{pageCount:Math.max(1,Math.ceil(f.last/f.limit)),pageRangeDisplayed:4,marginPagesDisplayed:1,onPageChange:function(e){var t=e.selected;E(Math.ceil(t*f.limit),f.limit)},breakLabel:"...",nextLabel:"Pr\xf3ximo",previousLabel:"Voltar",containerClassName:"pagination",breakClassName:"break-me",activeClassName:"active",nextClassName:"button-link",pageLinkClassName:"button-link",previousClassName:"button-link"}))};var C=function(){var e=Object(l.g)().id,t=Object(l.f)(),a=Object(n.useState)(!0),c=Object(u.a)(a,2),s=c[0],o=c[1],m=Object(n.useState)(),b=Object(u.a)(m,2),d=b[0],f=b[1],v=Object(n.useState)(""),E=Object(u.a)(v,2),N=E[0],k=E[1],C=Object(n.useState)(""),j=Object(u.a)(C,2),S=j[0],g=j[1];return Object(n.useEffect)((function(){O.get("/tasks/".concat(e)).then((function(e){var t=e.data;f(t),k(t.title),g((null===t||void 0===t?void 0:t.description)||""),o(!1)})).catch((function(e){if(t.push("/"),e.response){var a=e.response.status,n=e.response.data;i.b.error("".concat(a," - ").concat(n.error))}else i.b.error("Houve um problema ao tentar acessar a tarefa... Por favor, verifique as informa\xe7\xf5es.")}))}),[e,t]),Object(n.useEffect)((function(){f((function(e){return{_id:null===e||void 0===e?void 0:e._id,title:N,description:S,createdAt:null===e||void 0===e?void 0:e.createdAt,updatedAt:null===e||void 0===e?void 0:e.updatedAt}}))}),[N,S]),r.a.createElement("div",{className:"screen-route edit-screen"},s&&r.a.createElement("div",{className:"flex-center"},r.a.createElement(p.a,{type:"bars",color:"#bbb"})),!s&&!d&&r.a.createElement("div",{className:"flex-center"},r.a.createElement(p.a,{type:"bars",color:"#bbb"})),!s&&d&&r.a.createElement(h,{taskData:d}),!s&&d&&r.a.createElement("form",{className:"col"},r.a.createElement("label",{className:"col"},"T\xedtulo",r.a.createElement("input",{className:"input-text",type:"text",value:N,onChange:function(e){return k(e.target.value)}})),r.a.createElement("label",{className:"col"},"Descri\xe7\xe3o",r.a.createElement("input",{className:"input-text",type:"text",value:S,onChange:function(e){return g(e.target.value)}})),r.a.createElement("input",{className:"create-task-button",type:"submit",value:"Salvar",onClick:function(e){e.preventDefault(),o(!0);var t={title:N,description:S};O.patch("/tasks/".concat(null===d||void 0===d?void 0:d._id,"/edit"),t).then((function(){i.b.success("As altera\xe7\xf5es foram salvas com sucesso!")})).catch((function(e){if(e.response){var t=e.response.status,a=e.response.data;i.b.error("".concat(t," - ").concat(a.error))}else i.b.error("Houve um problema ao tentar salvar as atera\xe7\xf5es... Por favor, tente novamente.")})).then((function(){o(!1)}))}}),r.a.createElement("input",{className:"create-task-button",type:"submit",value:"Cancelar",onClick:function(e){e.preventDefault(),i.b.info("Nenhuma das altera\xe7\xf5es realizadas foram salvas!"),t.push("/")}}),r.a.createElement("input",{className:"delete-task-button",type:"submit",value:"Excluir",onClick:function(e){e.preventDefault(),o(!0),O.delete("/tasks/".concat(null===d||void 0===d?void 0:d._id,"/delete")).then((function(){i.b.success("Uma tarefa foi removida com sucesso!"),t.push("/")})).catch((function(e){if(o(!1),e.response){var t=e.response.status,a=e.response.data;i.b.error("".concat(t," - ").concat(a.error))}else i.b.error("Houve um problema ao tentar remover a tarefa... Por favor, tente novamente.")}))}})))};var j=function(){var e=Object(n.useState)(),t=Object(u.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),o=Object(u.a)(s,2),m=o[0],b=o[1],d=Object(n.useState)(""),f=Object(u.a)(d,2),v=f[0],E=f[1],N=Object(l.f)();return r.a.createElement("div",{className:"screen-route create-screen"},a&&r.a.createElement("div",{className:"flex-center"},r.a.createElement(p.a,{type:"bars",color:"#bbb"})),!a&&r.a.createElement("form",{className:"col"},r.a.createElement("label",{className:"col"},"T\xedtulo",r.a.createElement("input",{className:"input-text",type:"text",value:m,onChange:function(e){return b(e.target.value)}})),r.a.createElement("label",{className:"col"},"Descri\xe7\xe3o",r.a.createElement("input",{className:"input-text",type:"text",value:v,onChange:function(e){return E(e.target.value)}})),r.a.createElement("input",{className:"create-task-button",type:"submit",value:"Criar",onClick:function(e){e.preventDefault(),c(!0),O.post("/tasks/create",{title:m,description:v}).then((function(){i.b.success("Tarefa criada com sucesso!"),N.push("/")})).catch((function(e){if(c(!1),e.response){var t=e.response.status,a=e.response.data;i.b.error("".concat(t," - ").concat(a.error))}else i.b.error("Houve um problema ao tentar criar a tarefa... Por favor, tente novamente.")}))}}),r.a.createElement("input",{className:"create-task-button",type:"submit",value:"Cancelar",onClick:function(e){e.preventDefault(),i.b.info("Nenhuma das altera\xe7\xf5es realizadas foram salvas!"),N.push("/")}})))},S=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_ENV||"production";var g=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(o.a,null,"production"!==S&&r.a.createElement("span",null,"dev-mode"),r.a.createElement("h1",{className:"app-title"},"TODOrial"),r.a.createElement("div",{className:"navbar"},r.a.createElement(o.b,{to:"/"},"Tarefas"),r.a.createElement(o.b,{to:"/create"},"Adicionar Tarefa")),r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/create"},r.a.createElement(j,null)),r.a.createElement(l.a,{path:"/:id/edit"},r.a.createElement(C,null)),r.a.createElement(l.a,{path:"/"},r.a.createElement(k,null))),r.a.createElement(i.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})))};s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g,null)),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.dc8d33e5.chunk.js.map